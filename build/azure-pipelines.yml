# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

pool:
  vmImage: ubuntu-latest

variables:
- name : project
  value: 'iVectorOne-Search-Api'
- name : testProject
  value: 'iVectorOne-Search-Api-BuildTests'
- name: buildPlatform
  value: 'Any CPU'
- name: buildConfiguration
  value: 'Release'
# - name:  majorVersion
#   value: '2'
- name:  appVersion
  value : ''
  
steps:

- task: PowerShell@2
  inputs:
    targetType: 'inline'
    script: |
      $appSpecFile = Join-Path $(build.artifactStagingDirectory) $(project)_$(appVersion) 'appspec.yml'

      New-Item $appSpecFile
      Add-Content $appSpecFile 'test text'

- task: PublishBuildArtifacts@1
  displayName: 'Publish Build Artifacts'
  inputs:
    PathtoPublish: '$(build.artifactStagingDirectory)/$(project)_$(appVersion)'
    ArtifactName: '$(project)_$(appVersion)'
    publishLocation: 'Container'
